<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <script src="jquery-1.8.2.min.js"></script>
  <script src="d3.v2.min.js"></script>
  <script src="jquery.csv.min.js"></script>
  <script src="cohorts.js"></script>
  <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8">
  <title>Cohort visualizer</title>
  <!--
      Copyright 2012 Brett Slatkin

      Licensed under the Apache License, Version 2.0 (the "License");
      you may not use this file except in compliance with the License.
      You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

      Unless required by applicable law or agreed to in writing, software
      distributed under the License is distributed on an "AS IS" BASIS,
      WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
      See the License for the specific language governing permissions and
      limitations under the License.
  -->
</head>
<body>

<h1>Cohort visualizer</h1>

<table id="viz_container">
  <thead>
  <tr>
    <th id="viz_title1" colspan="3">
      <input class="viz-title" type="text" size="50" placeholder="Type a title here">
    </th>
  </tr>
  </thead>

  <tr>
    <td id="viz_graph1" class="chart-cell" colspan="3">
      <svg class="stacked">
        <g></g>
      </svg>
    </td>
  </tr>

  <tr>
    <td id="viz_group_type1"></td>
    <td>
      <div>
        Controls:
      </div>
      <input type="checkbox" name="normalize" id="normalize-check">
      <label for="normalize-check">Normalize cohorts</label>
    </td>
    <td id="viz_legend"></td>
  </tr>
  <tr>
    <td id="viz_group_value1">Group values</td>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
  </tr>
</table>

<h1>Paste your CSV here</h2>
<div>
  <p>
    <strong>Note: No data will go to the server. This is all client-side in your browser.</strong>
  </p>
  <p>

<textarea cols="120" rows="15" id="data">
Cohort group type,Cohort group value,Cohort day,Born,Updated profile,Sent first message,Unlocked first achievement,Made to post
Total,,10/13/12,1,35,75,18,45
Total,,10/14/12,2,35,76,19,47
Total,,10/15/12,2,35,76,21,49
Total,,10/16/12,3,35,76,22,52
Total,,10/17/12,4,35,76,23,54
Total,,10/18/12,6,35,76,25,57
Total,,10/19/12,7,34,75,26,59
Total,,10/20/12,8,34,75,28,62
Total,,10/21/12,10,34,75,29,64
Total,,10/22/12,12,34,74,30,66
Total,,10/23/12,13,33,73,32,68
Total,,10/24/12,15,33,73,33,70
Total,,10/25/12,17,32,72,34,72
Total,,10/26/12,19,32,71,35,74
Total,,10/27/12,22,31,70,37,76
Total,,10/28/12,24,31,69,38,78
Total,,10/29/12,26,30,67,39,80
Total,,10/30/12,28,29,66,40,82
Total,,10/31/12,31,29,65,41,83
Total,,11/01/12,33,28,63,42,85
Total,,11/02/12,36,27,62,43,86
Total,,11/03/12,38,26,60,44,87
Total,,11/04/12,41,26,58,45,88
Total,,11/05/12,43,25,57,46,90
Total,,11/06/12,46,24,55,47,90
Total,,11/07/12,49,23,53,48,91
Total,,11/08/12,51,22,51,48,92
Total,,11/09/12,54,21,49,49,92
Total,,11/10/12,57,20,48,49,93
Total,,11/11/12,59,19,46,50,93
</textarea>

<!-- 

Original data

Cohort group type,Cohort group value,Cohort day,Born,Updated profile,Sent first message
Sign-up referrer,Search,10/25/12,5,5,5
Sign-up referrer,Search,10/25/12,10,10,0
Sign-up referrer,Email,10/26/12,5,5,5
Sign-up referrer,Email,10/26/12,5,0,5
Favorite feature,Chat,10/25/12,0,5,10
Favorite feature,Chat,10/26/12,15,5,0
Favorite feature,Reading news,10/25/12,10,5,0
Favorite feature,Reading news,10/26/12,5,5,5
Total,,10/25/12,10,10,10
Total,,10/26/12,20,10,5

 -->

  </p>
  <p>
    <button id="visualize_my_data">Visualize my data</button>
  </p>
</div>

<h2>CSV format explanation</h2>
<div>
  <p>
    Format is comma-separated with quotes like Excel.  A guide to columns:
  </p>
  <ol>
    <li>Cohort group type: Think of this as an <a href="http://en.wikipedia.org/wiki/Enumerated_type#C_and_syntactically_similar_languages">enum type</a> name.</li>
    <li>Cohort group value: Think of these as enum values within an enum type.</li>
    <li>Cohort day: Day to which the entry belongs, in the format DD/MM/YY (e.g., 10/25/12 would be October 25th, 2012).</li>
    <li>State1: Number of users exclusively in state 1.</li>
    <li>State2: Number of users exclusively in state 2.</li>
    <li>... Additional state columns</li>
  </ol>
  <p>
    First row is used to name the various user states you have. It should be in the format "Cohort group type,Cohort group value,Cohort day,State1 name,State2 name,...".
  </p>
  <p>
    The dataset may have the same user appear in many rows that are of different
    group types. What's important is for each group type the user is only in one
    row with one group value; aka the tuple (group value, cohort day) should be
    a unique row for each cohort group type. Order of the rows does not matter.
  </p>
  <p>
    Here's a simple example for a fake social network with "Sign-up Referrer",
    "Favorite feature", and "Total" cohort groups. This only counts a user
    towards one referrer for sign up row, one favorite feature row, and one
    total row. In the case of "Total" the only valid grouping value is the empty
    string, which this tool treats specially.

    <table>
      <tr>
        <th>Cohort group type</th>
        <th>Cohort group value</th>
        <th>Cohort day</th>
        <th>Born</th>
        <th>Updated profile</th>
        <th>Sent first message</th>
      </tr>

      <!-- Sign-up referrer -->
      <tr>
        <td>Sign-up referrer</td>
        <td>Search</td>
        <td>10/25/12</td>
        <td>5</td>
        <td>5</td>
        <td>5</td>
      </tr>
      <tr>
        <td>Sign-up referrer</td>
        <td>Search</td>
        <td>10/25/12</td>
        <td>10</td>
        <td>10</td>
        <td>0</td>
      </tr>

      <tr>
        <td>Sign-up referrer</td>
        <td>Email</td>
        <td>10/26/12</td>
        <td>5</td>
        <td>5</td>
        <td>5</td>
      </tr>
      <tr>
        <td>Sign-up referrer</td>
        <td>Email</td>
        <td>10/26/12</td>
        <td>5</td>
        <td>0</td>
        <td>5</td>
      </tr>

      <!-- Favorite feature -->
      <tr>
        <td>Favorite feature</td>
        <td>Chat</td>
        <td>10/25/12</td>
        <td>0</td>
        <td>5</td>
        <td>10</td>
      </tr>
      <tr>
        <td>Favorite feature</td>
        <td>Chat</td>
        <td>10/26/12</td>
        <td>15</td>
        <td>5</td>
        <td>0</td>
      </tr>

      <tr>
        <td>Favorite feature</td>
        <td>Reading news</td>
        <td>10/25/12</td>
        <td>10</td>
        <td>5</td>
        <td>0</td>
      </tr>
      <tr>
        <td>Favorite feature</td>
        <td>Reading news</td>
        <td>10/26/12</td>
        <td>5</td>
        <td>5</td>
        <td>5</td>
      </tr>

      <!-- Total -->
      <tr>
        <td>Total</td>
        <td></td>
        <td>10/25/12</td>
        <td>10</td>
        <td>10</td>
        <td>10</td>
      </tr>
      <tr>
        <td>Total</td>
        <td></td>
        <td>10/26/12</td>
        <td>20</td>
        <td>10</td>
        <td>5</td>
      </tr>
    </table>
  </p>
</div>

<h1>More info</h1>
<div>
<p>
  Things to read to understand the motivation and method behind this:
  <ul>
    <li><a href="http://blog.kera.io/post/33745559146/cohort-analysis-metrics-for-a-scalable-business">Cohort Analysis: Metrics for a Scalable Business (kera.io)</a></li>
    <li><a href="http://www.avc.com/a_vc/2009/10/the-cohort-analysis.html">The Cohort Analysis (avc.com)</li>
    <li><a href="http://www.onebigfluke.com/2012/10/doing-cohort-analysis-with-map-reduce.html">Doing Cohort Analysis with Map Reduce (my blog)</li>
  </ul>
</p>
</div>

</body>
</html>
