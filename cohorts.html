<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <script src="jquery-1.8.2.min.js"></script>
  <script src="d3.v2.min.js"></script>
  <script src="jquery.csv.min.js"></script>
  <script src="cohorts.js"></script>
  <link rel="stylesheet" href="style.css" type="text/css" charset="utf-8">
</head>
<body>

<h1>Cohort visualizer</h1>

<table id="viz_container">
  <thead>
  <tr>
    <th id="viz_title1">V1</th>
  </tr>
  </thead>

  <tr>
    <td id="viz_graph1" class="chart-cell">Chart here</td>
  </tr>

  <tr>
    <td id="viz_group_type1"></td>
  </tr>
  <tr>
    <td id="viz_group_value1">Group values</td>
  </tr>
</table>

<h1>Paste your CSV here</h2>
<div>
  <p>
    <strong>Note: No data will go to the server. This is all client-side in your browser.</strong>
  </p>
  <p>

<textarea cols="120" rows="15" id="data">
Cohort group type,Cohort group value,Cohort day,Born,Updated profile,Sent first message
Sign-up referrer,Search,10/25/12,5,5,5
Sign-up referrer,Search,10/25/12,10,10,0
Sign-up referrer,Email,10/26/12,5,5,5
Sign-up referrer,Email,10/26/12,5,0,5
Favorite feature,Chat,10/25/12,0,5,10
Favorite feature,Chat,10/26/12,15,5,0
Favorite feature,Reading news,10/25/12,10,5,0
Favorite feature,Reading news,10/26/12,5,5,5
Total,,10/25/12,10,10,10
Total,,10/26/12,20,10,5
</textarea>

  </p>
  <p>
    <button id="visualize_my_data">Visualize my data</button>
  </p>
</div>

<h2>CSV format explanation</h2>
<div>
  <p>
    Format is comma-separated with quotes like Excel.  A guide to columns:
  </p>
  <ol>
    <li>Cohort group type: Think of this as a <a href="http://en.wikipedia.org/wiki/Enumerated_type#C_and_syntactically_similar_languages">enum type</a> name.</li>
    <li>Cohort group value: Think of these as enum values within an enum type.</li>
    <li>Cohort day: Day to which the entry belongs, in the format DD/MM/YY (e.g., 10/25/12 would be October 25th, 2012).</li>
    <li>State1: Number of users exclusively in state 1.</li>
    <li>State2: Number of users exclusively in state 2.</li>
    <li>... Additional state columns</li>
  </ol>
  <p>
    First row is used to name the various user states you have. It should be in the format "Cohort group type,Cohort group value,Cohort day,State1 name,State2 name,...".
  </p>
  <p>
    The tuple (group value, cohort day) should be a unique row for each cohort
    group type. The data may have the same user appear in many rows that are of
    different group types. What's important is for each group type the user is
    only in one row with one group value.
  </p>
  <p>
    Here's a simple example for a fake social network with "Sign-up Referrer",
    "Favorite feature", and "Total" cohort groups. This only counts a user
    towards one referrer for sign up row, one favorite feature row, and one
    total row. In the case of "Total" the only valid grouping value is the empty
    string, which this tool treats specially.

    <table>
      <tr>
        <th>Cohort group type</th>
        <th>Cohort group value</th>
        <th>Cohort day</th>
        <th>Born</th>
        <th>Updated profile</th>
        <th>Sent first message</th>
      </tr>

      <!-- Sign-up referrer -->
      <tr>
        <td>Sign-up referrer</td>
        <td>Search</td>
        <td>10/25/12</td>
        <td>5</td>
        <td>5</td>
        <td>5</td>
      </tr>
      <tr>
        <td>Sign-up referrer</td>
        <td>Search</td>
        <td>10/25/12</td>
        <td>10</td>
        <td>10</td>
        <td>0</td>
      </tr>

      <tr>
        <td>Sign-up referrer</td>
        <td>Email</td>
        <td>10/26/12</td>
        <td>5</td>
        <td>5</td>
        <td>5</td>
      </tr>
      <tr>
        <td>Sign-up referrer</td>
        <td>Email</td>
        <td>10/26/12</td>
        <td>5</td>
        <td>0</td>
        <td>5</td>
      </tr>

      <!-- Favorite feature -->
      <tr>
        <td>Favorite feature</td>
        <td>Chat</td>
        <td>10/25/12</td>
        <td>0</td>
        <td>5</td>
        <td>10</td>
      </tr>
      <tr>
        <td>Favorite feature</td>
        <td>Chat</td>
        <td>10/26/12</td>
        <td>15</td>
        <td>5</td>
        <td>0</td>
      </tr>

      <tr>
        <td>Favorite feature</td>
        <td>Reading news</td>
        <td>10/25/12</td>
        <td>10</td>
        <td>5</td>
        <td>0</td>
      </tr>
      <tr>
        <td>Favorite feature</td>
        <td>Reading news</td>
        <td>10/26/12</td>
        <td>5</td>
        <td>5</td>
        <td>5</td>
      </tr>

      <!-- Total -->
      <tr>
        <td>Total</td>
        <td></td>
        <td>10/25/12</td>
        <td>10</td>
        <td>10</td>
        <td>10</td>
      </tr>
      <tr>
        <td>Total</td>
        <td></td>
        <td>10/26/12</td>
        <td>20</td>
        <td>10</td>
        <td>5</td>
      </tr>
    </table>
  </p>
</div>

<h1>More info</h1>
<div>
<p>
  Things to read to understand the motivation and method behind this:
  <ul>
    <li><a href="http://blog.kera.io/post/33745559146/cohort-analysis-metrics-for-a-scalable-business">Cohort Analysis: Metrics for a Scalable Business (kera.io)</a></li>
    <li><a href="http://www.avc.com/a_vc/2009/10/the-cohort-analysis.html">The Cohort Analysis (avc.com)</li>
    <li><a href="http://www.onebigfluke.com/2012/10/doing-cohort-analysis-with-map-reduce.html">Doing Cohort Analysis with Map Reduce (my blog)</li>
  </ul>
</p>
</div>

</body>
</html>
